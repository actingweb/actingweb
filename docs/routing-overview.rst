================
Routing Overview
================

This page summarizes the HTTP routes generated by the ActingWeb library when integrating with Flask or FastAPI, and how base paths are handled.

Integration
===========

.. code-block:: python

    # Flask
    from flask import Flask
    from actingweb.interface import ActingWebApp

    app = Flask(__name__)
    ActingWebApp(...).with_web_ui().integrate_flask(app)

    # FastAPI
    from fastapi import FastAPI
    api = FastAPI()
    ActingWebApp(...).integrate_fastapi(api, templates_dir="templates")

Core Actor Routes
=================

- `/`: Root factory (create actor via web or API)
- `/<actor_id>`: Actor root endpoint
- `/<actor_id>/meta`: Discovery metadata
- `/<actor_id>/properties`: Get/update/delete properties
- `/<actor_id>/resources`: Fetch external resources (read-only)
- `/<actor_id>/methods`: RPC-style methods
- `/<actor_id>/actions`: Side-effecting actions
- `/<actor_id>/trust`: Trust relationships and permissions
- `/<actor_id>/subscriptions`: Subscriptions to peer updates
- `/<actor_id>/callbacks`: Inbound callbacks (peer/webhooks)

Web UI Routes (when with_web_ui(True))
======================================

- `/<actor_id>/www`: Dashboard
- `/<actor_id>/www/properties` and `/<actor_id>/www/properties/<name>`
- `/<actor_id>/www/trust` and `/<actor_id>/www/trust/new`
- `/<actor_id>/www/init`: Initialization helpers

Authentication
==============

- `/oauth`: OAuth2 callback and session handling (when configured via with_oauth)
- Web UI and protected routes enforce authentication according to configuration (basic or OAuth2)

Base Paths
==========

- Deployments under a base path (e.g., `/my-server`) are supported by both integrations.
- Templates receive `actor_root` and `actor_www` to generate correct links regardless of base path.
- Avoid relative links in templates; prefer the provided variables.

Notes
=====

- Optional MCP endpoints are controlled by with_mcp(enable=...); see :doc:`mcp-applications`.
- Development routes are available when with_devtest(True) is set.

