
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>actingweb.config &#8212; ActingWeb 2.6.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for actingweb.config</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span><span class="w"> </span><span class="nn">binascii</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">importlib</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">uuid</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span>


<div class="viewcode-block" id="Config"><a class="viewcode-back" href="../../docs/actingweb.html#actingweb.config.Config">[docs]</a><span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1">#########</span>
        <span class="c1"># Basic settings for this app</span>
        <span class="c1">#########</span>
        <span class="c1"># Values that can be changed as part of instantiating config</span>
        <span class="c1"># The host and domain, i.e. FQDN, of the URL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fqdn</span> <span class="o">=</span> <span class="s2">&quot;demo.actingweb.io&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proto</span> <span class="o">=</span> <span class="s2">&quot;https://&quot;</span>  <span class="c1"># http or https</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">env</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">database</span> <span class="o">=</span> <span class="s2">&quot;dynamodb&quot;</span>
        <span class="c1"># Turn on the /www path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1"># Enable /devtest path for test purposes, MUST be False in production</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">devtest</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1"># Will enforce unique creator field across all actors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unique_creator</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># Use &quot;email&quot; internal value to set creator value (after creation and property set)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">force_email_prop_as_creator</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1"># basic or oauth: basic for creator + bearer tokens</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">www_auth</span> <span class="o">=</span> <span class="s2">&quot;basic&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logLevel</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span>
        <span class="c1"># Change to WARN for production, DEBUG for debugging, and INFO for normal testing</span>
        <span class="c1">#########</span>
        <span class="c1"># Configurable ActingWeb settings for this app</span>
        <span class="c1">#########</span>
        <span class="c1"># The app type this actor implements</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aw_type</span> <span class="o">=</span> <span class="s2">&quot;urn:actingweb:actingweb.org:demo&quot;</span>
        <span class="c1"># A human-readable description for this specific actor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">desc</span> <span class="o">=</span> <span class="s2">&quot;Demo actor: &quot;</span>
        <span class="c1"># URL to a RAML/Swagger etc definition if available</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">specification</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="c1"># A version number for this app</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;1.0&quot;</span>
        <span class="c1"># Where can more info be found</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">info</span> <span class="o">=</span> <span class="s2">&quot;http://actingweb.org/&quot;</span>
        <span class="c1">#########</span>
        <span class="c1"># Trust settings for this app</span>
        <span class="c1">#########</span>
        <span class="c1"># Default relationship if not specified</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_relationship</span> <span class="o">=</span> <span class="s2">&quot;associate&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">auto_accept_default_relationship</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># True if auto-approval</span>
        <span class="c1">#########</span>
        <span class="c1"># Known and trusted ActingWeb actors</span>
        <span class="c1">#########</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actors</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;&lt;SHORTTYPE&gt;&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;urn:&lt;ACTINGWEB_TYPE&gt;&quot;</span><span class="p">,</span>
                <span class="s2">&quot;factory&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;ROOT_URI&gt;&quot;</span><span class="p">,</span>
                <span class="s2">&quot;relationship&quot;</span><span class="p">:</span> <span class="s2">&quot;friend&quot;</span><span class="p">,</span>  <span class="c1"># associate, friend, partner, admin</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="c1">#########</span>
        <span class="c1"># OAuth settings for this app, fill in if OAuth is used</span>
        <span class="c1">#########</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oauth</span> <span class="o">=</span> <span class="p">{</span>
            <span class="c1"># An empty client_id turns off oauth capabilities</span>
            <span class="s2">&quot;client_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;client_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;redirect_uri&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">proto</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fqdn</span> <span class="o">+</span> <span class="s2">&quot;/oauth&quot;</span><span class="p">,</span>
            <span class="s2">&quot;scope&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;auth_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;token_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;response_type&quot;</span><span class="p">:</span> <span class="s2">&quot;code&quot;</span><span class="p">,</span>
            <span class="s2">&quot;grant_type&quot;</span><span class="p">:</span> <span class="s2">&quot;authorization_code&quot;</span><span class="p">,</span>
            <span class="s2">&quot;refresh_type&quot;</span><span class="p">:</span> <span class="s2">&quot;refresh_token&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bot</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;token&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="c1"># List of paths and their access levels</span>
        <span class="c1"># Matching is done top to bottom stopping at first match (role, path)</span>
        <span class="c1"># If no match is found on path with the correct role, access is rejected</span>
        <span class="c1"># &lt;type&gt; and &lt;id&gt; are used as templates for trust types and ids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">access</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c1"># (role, path, method, access), e.g. (&#39;friend&#39;, &#39;/properties&#39;, &#39;&#39;, &#39;a&#39;)</span>
            <span class="c1"># Roles: creator, trustee, associate, friend, partner, admin, any (i.e. authenticated),</span>
            <span class="c1">#        owner (i.e. trust peer owning the entity)</span>
            <span class="c1">#        + any other new role for this app</span>
            <span class="c1"># Methods: GET, POST, PUT, DELETE</span>
            <span class="c1"># Access: a (allow) or r (reject)</span>
            <span class="c1"># Allow GET to anybody without auth</span>
            <span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;meta&quot;</span><span class="p">,</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="c1"># Allow any method to anybody without auth</span>
            <span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;oauth&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="c1"># Allow owners on subscriptions</span>
            <span class="p">(</span><span class="s2">&quot;owner&quot;</span><span class="p">,</span> <span class="s2">&quot;callbacks/subscriptions&quot;</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="c1"># Allow anybody callbacks witout auth</span>
            <span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;callbacks&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="c1"># Allow only creator access to /www</span>
            <span class="p">(</span><span class="s2">&quot;creator&quot;</span><span class="p">,</span> <span class="s2">&quot;www&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="c1"># Allow creator access to /properties</span>
            <span class="p">(</span><span class="s2">&quot;creator&quot;</span><span class="p">,</span> <span class="s2">&quot;properties&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="c1"># Allow GET only to associate</span>
            <span class="p">(</span><span class="s2">&quot;associate&quot;</span><span class="p">,</span> <span class="s2">&quot;properties&quot;</span><span class="p">,</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="c1"># Allow friend/partner/admin all</span>
            <span class="p">(</span><span class="s2">&quot;friend&quot;</span><span class="p">,</span> <span class="s2">&quot;properties&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;partner&quot;</span><span class="p">,</span> <span class="s2">&quot;properties&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span> <span class="s2">&quot;properties&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;creator&quot;</span><span class="p">,</span> <span class="s2">&quot;resources&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="c1"># Allow friend/partner/admin all</span>
            <span class="p">(</span><span class="s2">&quot;friend&quot;</span><span class="p">,</span> <span class="s2">&quot;resources&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;partner&quot;</span><span class="p">,</span> <span class="s2">&quot;resources&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span> <span class="s2">&quot;resources&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="c1"># Allow unauthenticated POST</span>
            <span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;trust/&lt;type&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="c1"># Allow trust peer full access</span>
            <span class="p">(</span><span class="s2">&quot;owner&quot;</span><span class="p">,</span> <span class="s2">&quot;trust/&lt;type&gt;/&lt;id&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="c1"># Allow access to all to</span>
            <span class="p">(</span><span class="s2">&quot;creator&quot;</span><span class="p">,</span> <span class="s2">&quot;trust&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="c1"># creator/trustee/admin</span>
            <span class="p">(</span><span class="s2">&quot;trustee&quot;</span><span class="p">,</span> <span class="s2">&quot;trust&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span> <span class="s2">&quot;trust&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="c1"># Owner can create++ own subscriptions</span>
            <span class="p">(</span><span class="s2">&quot;owner&quot;</span><span class="p">,</span> <span class="s2">&quot;subscriptions&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="c1"># Owner can create subscriptions</span>
            <span class="p">(</span><span class="s2">&quot;friend&quot;</span><span class="p">,</span> <span class="s2">&quot;subscriptions/&lt;id&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="c1"># Creator can do everything</span>
            <span class="p">(</span><span class="s2">&quot;creator&quot;</span><span class="p">,</span> <span class="s2">&quot;subscriptions&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="c1"># Trustee can do everything</span>
            <span class="p">(</span><span class="s2">&quot;trustee&quot;</span><span class="p">,</span> <span class="s2">&quot;subscriptions&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="c1"># Root access for actor</span>
            <span class="p">(</span><span class="s2">&quot;creator&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;trustee&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="c1"># Pick up the config variables</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span> <span class="o">==</span> <span class="s2">&quot;dynamodb&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">env</span> <span class="o">=</span> <span class="s2">&quot;aws&quot;</span>
        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">logLevel</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;DEBUG&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logLevel</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span>
        <span class="k">elif</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">logLevel</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;WARN&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logLevel</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">WARN</span>
        <span class="k">elif</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">logLevel</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;INFO&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logLevel</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logLevel</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span>
        <span class="k">if</span> <span class="s2">&quot;myself&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actors</span><span class="p">:</span>
            <span class="c1"># Add myself as a known type</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actors</span><span class="p">[</span><span class="s2">&quot;myself&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">aw_type</span><span class="p">,</span>
                <span class="s2">&quot;factory&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">proto</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fqdn</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span>
                <span class="s2">&quot;relationship&quot;</span><span class="p">:</span> <span class="s2">&quot;friend&quot;</span><span class="p">,</span>  <span class="c1"># associate, friend, partner, admin</span>
            <span class="p">}</span>
        <span class="c1"># Dynamically load all the database modules</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">DbActor</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span>
            <span class="s2">&quot;actingweb&quot;</span> <span class="o">+</span> <span class="s2">&quot;.db_&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span> <span class="o">+</span> <span class="s2">&quot;.db_actor&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">DbPeerTrustee</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span>
            <span class="s2">&quot;actingweb&quot;</span> <span class="o">+</span> <span class="s2">&quot;.db_&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span> <span class="o">+</span> <span class="s2">&quot;.db_peertrustee&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">DbProperty</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span>
            <span class="s2">&quot;actingweb&quot;</span> <span class="o">+</span> <span class="s2">&quot;.db_&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span> <span class="o">+</span> <span class="s2">&quot;.db_property&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">DbAttribute</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span>
            <span class="s2">&quot;actingweb&quot;</span> <span class="o">+</span> <span class="s2">&quot;.db_&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span> <span class="o">+</span> <span class="s2">&quot;.db_attribute&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">DbSubscription</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span>
            <span class="s2">&quot;actingweb&quot;</span> <span class="o">+</span> <span class="s2">&quot;.db_&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span> <span class="o">+</span> <span class="s2">&quot;.db_subscription&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">DbSubscriptionDiff</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span>
            <span class="s2">&quot;actingweb&quot;</span> <span class="o">+</span> <span class="s2">&quot;.db_&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span> <span class="o">+</span> <span class="s2">&quot;.db_subscription_diff&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">DbTrust</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span>
            <span class="s2">&quot;actingweb&quot;</span> <span class="o">+</span> <span class="s2">&quot;.db_&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span> <span class="o">+</span> <span class="s2">&quot;.db_trust&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="p">[</span><span class="s2">&quot;deferred&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">#########</span>
        <span class="c1"># ActingWeb settings for this app</span>
        <span class="c1">#########</span>
        <span class="c1"># This app follows the actingweb specification specified</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aw_version</span> <span class="o">=</span> <span class="s2">&quot;1.0&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aw_supported</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;www,oauth,callbacks,trust,onewaytrust,subscriptions,&quot;</span>
            <span class="s2">&quot;actions,resources,methods,sessions,nestedproperties&quot;</span>
        <span class="p">)</span>  <span class="c1"># This app supports these options</span>
        <span class="c1"># These are the supported formats</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aw_formats</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span>
        <span class="c1">#########</span>
        <span class="c1"># Only touch the below if you know what you are doing</span>
        <span class="c1">#########</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">logLevel</span><span class="p">)</span>
        <span class="c1"># Turn off debugging for pynamodb and botocore, too noisy</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">logLevel</span> <span class="o">==</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">:</span>
            <span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;pynamodb&quot;</span><span class="p">)</span>
            <span class="n">log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
            <span class="n">log</span><span class="o">.</span><span class="n">propagate</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;botocore&quot;</span><span class="p">)</span>
            <span class="n">log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
            <span class="n">log</span><span class="o">.</span><span class="n">propagate</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1"># root URI used to identity actor externally</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">proto</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fqdn</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span>
        <span class="c1"># Authentication realm used in Basic auth</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">auth_realm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fqdn</span>

<div class="viewcode-block" id="Config.new_uuid"><a class="viewcode-back" href="../../docs/actingweb.html#actingweb.config.Config.new_uuid">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">new_uuid</span><span class="p">(</span><span class="n">seed</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid5</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">NAMESPACE_URL</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">seed</span><span class="p">))</span><span class="o">.</span><span class="n">hex</span></div>

<div class="viewcode-block" id="Config.new_token"><a class="viewcode-back" href="../../docs/actingweb.html#actingweb.config.Config.new_token">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">new_token</span><span class="p">(</span><span class="n">length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">40</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">tok</span> <span class="o">=</span> <span class="n">binascii</span><span class="o">.</span><span class="n">hexlify</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">urandom</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">length</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">tok</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span></div></div>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">ActingWeb</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../LICENSE.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../README.html">README - actingweb - an ActingWeb Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/developers.html">ActingWeb Developer Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/actingweb-spec.html">ActingWeb Specification - version 1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/actingweb.html">actingweb code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CHANGELOG.html">CHANGELOG</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2020, Greger Teigre Wedel.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
    </div>

    

    
  </body>
</html>